@import com.mohiva.play.silhouette.api.actions.UserAwareRequest
@import silhouette.CookieEnv

@(title: String = "家計簿")(body: Html)(implicit request: UserAwareRequest[CookieEnv, AnyContent])

<html>
    <head>
        <meta charset="utf-8">
        <title>@title</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.1/css/bulma.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
    </head>
    <body>
        <nav class="navbar" role="navigation" aria-label="main navigation">
            <div class="container">
                <div class="navbar-brand">
                    <a class="navbar-item" href="@routes.Home.index()">
                        <i class="fa fa-home fa-2x" aria-hidden="true"></i>
                    </a>

                    <button class="button navbar-burger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
                <div class="navbar-menu">
                    <div class="navbar-end">
                    @if(request.identity.isDefined){
                        <a class="navbar-item" href="@routes.Account.logout()">
                            <i class="fa fa-sign-out fa-2x" aria-hidden="true"></i>
                            ログアウト
                        </a>
                    } else {
                        <a class="navbar-item" href="@routes.Account.loginIndex()">
                            <i class="fa fa-sign-in fa-2x" aria-hidden="true"></i>
                            ログイン
                        </a>
                        <a class="navbar-item" href="@routes.Account.registerIndex()">
                            <i class="fa fa-user-plus fa-2x" aria-hidden="true"></i>
                            新規登録
                        </a>
                    }
                    </div>
                </div>
            </div>
        </nav>
        <div class="container">
            <div id="body">
                @body
            </div>
        </div>
    </body>
    <style type="text/css">
        .fa {
            margin-right: 5px;
        }

        body {
            height: 100%;
        }
    </style>
    <script>
        document.querySelector(".navbar-burger").addEventListener("click", () => {
            const menu = document.querySelector(".navbar-menu");
            const dom = document.querySelectorAll(".navbar-menu, .navbar-burger");
            if (menu.classList.contains("is-active")) {
                dom.forEach((d) => {
                    d.classList.remove("is-active");
                });
            } else {
                dom.forEach((d) => {
                    d.classList.add("is-active");
                });
            }
        });

        const deleteButton = document.getElementsByClassName("delete");
        for (let i = 0; i < deleteButton.length; i++) {
            deleteButton[i].addEventListener("click", (e) => {
                const parent = e.target.parentNode;
                parent.parentNode.removeChild(parent);
            });
        }
    </script>
</html>